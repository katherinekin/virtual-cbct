# virtual-cbct

## Dependencies and setup

This is a python 3 project that uses astra-toolbox to simulate cone beam CT imaging, a type of 3-D medical imaging technique using x-rays. Dependencies for this project include numpy, scipy, opencv-python, matplotlib, imageio, boost, and an NVIDIA GPU and CUDA (at least version 5.5). Please download and install the CUDA toolkit following the instructions on the NVIDIA CUDA website if not already installed: [https://developer.nvidia.com/cuda-toolkit]

The following commands can be used to install the other dependencies:

```
pip install numpy
pip install opencv-python
pip install matplotlib
pip install boost
pip install scipy
pip install imageio
```

Creating a virtual environment prior to installation of these dependencies is recommended. Finally, please install astra-toolbox following the directions on the associated github page [https://github.com/astra-toolbox/astra-toolbox]. astra-toolbox is available for MATLAB or Python. For this project to run, please follow the directions for downloading astra-toolbox for Python. Alternatively, it should also be possible to install dependencies with conda, including astra-toolbox per instructions on the github page. However, it should be noted that astra-toolbox does not work when installed from PyPI.


## Run instructions

If a virtual environment was created as part of the setup, first activate the virtual environment. Then, run ```main.py``` to start the program. Using command line from the project root directory on Windows OS:

```
python src\main.py
```
A graphical user interface will generate. The values that are preset in the user interface can be adjusted as desired prior to running the cone beam CT simulation. To run the simulation, click on the submit button.

## Expected results

After the run, an output directory will be generated. Within the directory, the directory dataset/ will contain .tif images generated perpendicular to the cone beam CT projections. These images represent the 360 degrees view of the phantom. The directory reconstruction/ will contain .tif images reconstruced from these projection images. These images represent the slices of the phantom along the axis around which the cone beam rotates. 

## Additional notes

This simulation uses a default phantom object as the model on which images are collected. The phantom represents the human body. The changes in the generated images caused by changes in distance of the phantom from xray source, distance of the phantom from the xray detector, attentuation coefficients of the different materials within the phantom, etc., should reflect how these factors would affect images generated by cone beam CT in real life. The purpose of this project is to provide a tool to observe how changes in these factors affect the quality of the generated images, with the potential of understanding better and improving on the cone beam CT medical imaging technique.
